#include "engine/physics/fanBoxCollider.hpp"
#include "core/memory/fanSerializable.hpp"

namespace fan
{
    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void BoxCollider::SetInfo( EcsComponentInfo& _info )
    {
        _info.load = &BoxCollider::Load;
        _info.save = &BoxCollider::Save;
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void BoxCollider::Init( EcsWorld&, EcsEntity, EcsComponent& _component )
    {
        // clear
        BoxCollider& collider = static_cast<BoxCollider&>( _component );
        collider.mHalfExtents = FIXED( 0.5 ) * Vector3::sOne;
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void BoxCollider::Save( const EcsComponent& _component, Json& _json )
    {
        const BoxCollider& collider = static_cast<const BoxCollider&>( _component );
        Serializable::SaveVec3( _json, "half_extents", collider.mHalfExtents );
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void BoxCollider::Load( EcsComponent& _component, const Json& _json )
    {
        BoxCollider& collider = static_cast<BoxCollider&>( _component );
        Serializable::LoadVec3( _json, "half_extents", collider.mHalfExtents );
    }
}


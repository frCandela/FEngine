#include "core/fanDebug.hpp"
#include "engine/singletons/fanApplication.hpp"

namespace fan
{
    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Application::SetInfo( EcsSingletonInfo& _info )
    {
        _info.mFlags |= EcsSingletonFlags::InitOnce;
        _info.mSlots.push_back( new Slot<>( "quit", &Application::OnQuit ) );
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Application::Init( EcsWorld& /*_world*/, EcsSingleton& _this )
    {
        Application& app = static_cast<Application&>( _this );
        app.mResources = nullptr;
        app.mOnQuit.Clear();
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Application::OnQuit( EcsSingleton& _this )
    {
        Application& app = static_cast<Application&>( _this );
        app.mOnQuit.Emmit();
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Application::Setup( Resources* _resource )
    {
        mResources = _resource;
    }
}

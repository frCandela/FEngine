#include "game/components/fanHealth.hpp"
#include "engine/fanEngineSerializable.hpp"

namespace fan
{
    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Health::SetInfo( EcsComponentInfo& _info )
    {
        _info.load = &Health::Load;
        _info.save = &Health::Save;
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Health::Init( EcsWorld& /*_world*/, EcsEntity /*_entity*/, EcsComponent& _component )
    {
        Health& health = static_cast<Health&>( _component );
        health.mMaxHealth = 100;
        health.mHealth = health.mMaxHealth;
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Health::Save( const EcsComponent& _component, Json& _json )
    {
        const Health& health = static_cast<const Health&>( _component );
        Serializable::SaveFixed( _json, "health", health.mMaxHealth );
    }

    //==================================================================================================================================================================================================
    //==================================================================================================================================================================================================
    void Health::Load( EcsComponent& _component, const Json& _json )
    {
        Health& health = static_cast<Health&>( _component );
        Serializable::LoadFixed( _json, "health", health.mMaxHealth );
        health.mHealth = health.mMaxHealth;
    }
}